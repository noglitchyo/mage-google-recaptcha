<?xml version="1.0"?>
<!--

/**
 * @category NoGlitchYo
 * @package NoGlitchYo_GoogleRecaptcha
 * @author Maxime ELOMARI <maxime.elomari@gmail.com>
 * @copyright Copyright (c) 2015, Maxime Elomari
 * @license http://opensource.org/licenses/MIT
 */

-->
<layout version="0.1.0">
    <default>
        <block type="grecaptcha/widget" name="grecaptcha.widget" as="grecaptcha_widget" template="grecaptcha/widget.phtml">
            <reference name="head">
                <block type="core/text" name="grecaptcha">
                    <action method="setText"><text><![CDATA[<script defer async src="//www.google.com/recaptcha/api.js?onload=onloadCallback&amp;render=explicit"></script>]]></text></action>
                </block>
            </reference>
        </block>
    </default>

    <customer_account_login>
        <reference name="customer_form_login">
            <block type="core/text_list" name="form.additional.info">
                <action ifconfig="grecaptcha/pages/customer_account_login" method="append"><block>grecaptcha.widget</block></action>
            </block>
        </reference>
    </customer_account_login>

    <customer_account_create>
        <reference name="customer_form_register">
            <block type="core/text_list" name="form.additional.info">
                <action ifconfig="grecaptcha/pages/customer_account_create" method="append"><block>grecaptcha.widget</block></action>
            </block>
        </reference>
    </customer_account_create>

    <customer_account_forgotpassword>
        <reference name="forgotPassword">
            <block type="core/text_list" name="form.additional.info" >
                <action ifconfig="grecaptcha/pages/customer_account_forgotpassword" method="append"><block>grecaptcha.widget</block></action>
            </block>
        </reference>
    </customer_account_forgotpassword>

    <checkout_onepage_index>
        <reference name="checkout.onepage.login">
            <block type="core/text_list" name="form.additional.info" >
                <action ifconfig="grecaptcha/pages/checkout_onepage_index" method="append"><block>grecaptcha.widget</block></action>
            </block>
        </reference>
    </checkout_onepage_index>
</layout>
